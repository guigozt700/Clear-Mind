// script.js
let respostas = [];
const perguntas = [
    { texto: "O clima est√° agrad√°vel?", opcoes: ["üòÄ", "üòê", "üò°"], proxima: "sono" },
    { texto: "Teve uma boa noite de sono?", opcoes: ["üòÄ", "üòê", "üò°"], proxima: "dia" },
    { texto: "O seu dia est√° bem?", opcoes: ["üòÄ", "üòê", "üò°"], proxima: "produtividade" },
    { texto: "Avalie o seu n√≠vel de produtividade de hoje.", opcoes: ["üòÄ", "üòê", "üò°"], proxima: "superou" },
    { texto: "Algo na sua semana superou suas expectativas?", opcoes: ["üòÄ", "üòê", "üò°"], proxima: "atividades" },
    { texto: "Gostaria de fazer atividades mais estimulantes?", opcoes: ["üòÄ", "üòê", "üò°"], proxima: "noticias" },
    { texto: "Como se sente em rela√ß√£o √†s not√≠cias da atualidade?", opcoes: ["üòÄ", "üòê", "üò°"], proxima: "estudos" },
    { texto: "Voc√™ est√° aproveitando os seus estudos?", opcoes: ["üòÄ", "üòê", "üò°"], proxima: "gostou" },
    { texto: "Voc√™ gostou de responder a avalia√ß√£o?", opcoes: ["üòÄ", "üòê", "üò°"], proxima: "final" },
    { texto: "Analisando seus resultados...", opcoes: [] }
];

function mostrarPergunta(index) {
    const pergunta = perguntas[index];
    const perguntaEl = document.getElementById("pergunta");
    const opcoesDiv = document.getElementById("opcoes");

    perguntaEl.textContent = pergunta.texto;
    opcoesDiv.innerHTML = "";

    // Mostrar as op√ß√µes de resposta
    pergunta.opcoes.forEach(opcao => {
        const btn = document.createElement("button");
        btn.textContent = opcao;
        btn.onclick = () => {
            respostas.push(opcao);
            if (pergunta.proxima === "final") {
                mostrarResultadoFinal();
            } else {
                mostrarPergunta(perguntas.findIndex(p => p.proxima === pergunta.proxima));
            }
        };
        opcoesDiv.appendChild(btn);
    });
}

function mostrarResultadoFinal() {
    const opcoesDiv = document.getElementById("opcoes");
    const perguntaEl = document.getElementById("pergunta");

    // Chama a fun√ß√£o de diagn√≥stico importada
    const { tituloDiag, descricao, gifUrl } = gerarDiagnostico(respostas);

    opcoesDiv.innerHTML = "";
    const card = document.createElement("div");
    card.className = "resultado-card";

    const h = document.createElement("h2");
    h.textContent = tituloDiag;
    card.appendChild(h);

    const p = document.createElement("p");
    p.textContent = descricao;
    card.appendChild(p);

    const img = document.createElement("img");
    img.src = gifUrl;
    img.alt = tituloDiag;
    img.style.width = "300px";
    card.appendChild(img);

    opcoesDiv.appendChild(card);

    // Bot√£o para refazer o teste
    const btnRefazer = document.createElement("button");
    btnRefazer.textContent = "üîÑ Refazer teste";
    btnRefazer.onclick = () => {
        respostas = [];
        mostrarPergunta(0); // Come√ßa novamente do in√≠cio
    };
    opcoesDiv.appendChild(btnRefazer);
}

// Inicia o quiz ao clicar no t√≠tulo
document.getElementById("titulo").addEventListener("click", () => {
    document.getElementById("quizContainer").classList.add("visivel");
    mostrarPergunta(0); // Come√ßa com a primeira pergunta
});
